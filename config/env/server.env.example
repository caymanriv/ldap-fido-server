# ======================
# Application Settings
# ======================
NODE_ENV=development
SERVER_DEFAULT_PORT=3000
FRONTEND_DEFAULT_PORT=5173
SERVER_SESSION_SECRET=your_secure_random_string
SERVER_CORS_ORIGIN=http://rpid.example.org:3000,http://localhost:5173,https://rpid.example.org:5173
FRONTEND_URL=https://rpid.example.org:5173
BACKEND_PUBLIC_URL=http://rpid.example.org:3000
DEBUG_LOGS=false

# ======================
# Database Configuration
# ======================
DB_HOST=postgres
DB_PORT=5432
DB_NAME=ldapfido
DB_USER=ldapfido
DB_PASSWORD=ldapfido_pw
POSTGRES_USER=ldapfido
POSTGRES_DB=ldapfido
POSTGRES_PASSWORD=ldapfido_pw
DB_CONNECTION_TIMEOUT_MS=30000
DB_QUERY_TIMEOUT_MS=30000
DB_STATEMENT_TIMEOUT_MS=30000

# ======================
# Redis Configuration
# ======================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ======================
# LDAP Configuration
# ======================
LDAP_ORGANISATION=Example Org
LDAP_DOMAIN=example.org
LDAP_BASE_DN=dc=example,dc=org
LDAP_PORT=389
LDAP_SSL_PORT=636
LDAP_URL=ldap://openldap:389
LDAP_ADMIN_DN=cn=admin,dc=example,dc=org
LDAP_ADMIN_PASSWORD=adminpassword
LDAP_USER_IDENTIFIER=uid
LDAP_SEARCH_BASE_USERS=ou=users,dc=example,dc=org
LDAP_SEARCH_FILTER=(uid={{username}})
LDAP_SEARCH_BASE_GROUPS=ou=groups,dc=example,dc=org
LDAP_APP_ADMIN_GROUP_CN=admin

# ======================
# WebAuthn Configuration
# ======================
FIDO2_RP_ID=rpid.example.org
FIDO2_RP_NAME="LDAP FIDO Server"
FIDO2_RP_ORIGIN=https://rpid.example.org:5173
FIDO2_USER_VERIFICATION=required
FIDO2_ALLOWCREDENTIALS_TRANSPORTS=usb,nfc,ble,internal,hybrid

# ======================
# Email Configuration (for TOTP verification)
# ======================
SMTP_ENABLED=true
SMTP_HOST=smtp_host
SMTP_PORT=smtp_port
SMTP_SSL=false
SMTP_USER=smtp_user
SMTP_PASSWORD=smtp_password
SMTP_EMAIL_FROM_NAME="LDAP FIDO"
SMTP_EMAIL_FROM_ADDRESS=noreply@example.org

# ======================
# TOTP Configuration
# ======================
SMTP_TOTP_STEP=300  # 5 minutes in seconds
SMTP_TOTP_WINDOW=1  # Allow 1 step before/after current time
SMTP_TOTP_LENGTH=6

# ======================
# Session Configuration
# ======================
SESSION_COOKIE_SAMESITE=None
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_DOMAIN=rpid.example.org

# ======================
# Load Balancer Configuration
# ======================
LOAD_BALANCER_HOST=rpid.example.org
LOAD_BALANCER_PORT=3000
